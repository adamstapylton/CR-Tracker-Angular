<form #crForm="ngForm" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
  <div class="alert alert-danger alert-dismissible fade show" role="alert" *ngIf="httpError != null">
    <span>{{ httpError }}</span>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="form-group">
    <label>PSG ID</label>
    <input required
           class="form-control"
           [(ngModel)]="newChangeRequest.changeRequestId"
           [ngClass]="{'is-invalid': f.submitted && changeRequestId.invalid}"
           name="changeRequestId"
           #changeRequestId="ngModel"/>
  </div>
  <div class="form-group">
    <label>Description</label>
    <input required
           class="form-control"
           [(ngModel)]="newChangeRequest.description"
           [ngClass]="{'is-invalid': f.submitted && description.invalid}"
           name="description"
           #description="ngModel"/>
  </div>
  <div class="form-group">
    <label>Date Required</label>
    <input type="date"
           class="form-control"
           [(ngModel)]="newChangeRequest.dateRequired"
           name="dateRequired"/>
  </div>
  <div class="form-group">
    <label>Raised By</label>
    <select required class="form-control"
            [(ngModel)]="newChangeRequest.raisedByUser"
            [ngClass]="{'is-invalid': f.submitted && raisedByUser.invalid}"
            name="raisedByUser"
            #raisedByUser="ngModel">
      <option *ngFor="let user of users"
              [ngValue]="user">{{ user.firstName }} {{ user.surname }}</option>
    </select>

  </div>
  <div class="form-group">
    <label>Worktypes</label>
    <select required
            class="form-control"
            [(ngModel)]="newChangeRequest.worktypes"
            [ngClass]="{'is-invalid': f.submitted && worktypes.invalid}"
            name="worktypes"
            
            multiple>
      <option *ngFor="let worktype of worktypes"
              [ngValue]="worktype">{{ worktype.name }}</option>
    </select>
  </div>
  <div class="form-group">
    <label>Billing Rules Required</label>
    <input type="checkbox"
           class="form-control"
           [(ngModel)]="newChangeRequest.billingRulesRequired"
           name="billingRulesRequired"/>
  </div>
  <div>
    <button type="submit" class="btn-primary btn" >Add</button>
  </div>
</form>
